<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Creating a Nikola theme with Sass-compiled Bootstrap | Louis Tiao</title>
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://ltiao.github.io/posts/creating-a-nikola-theme-with-sass-compiled-bootstrap.html">
<link rel="icon" href="../favicon_256x256.ico" sizes="256x256">
<link rel="icon" href="../favicon_16x16.ico" sizes="16x16">
<link rel="icon" href="../favicon_32x32.ico" sizes="32x32">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><!-- 

    /\\\\\\\\\\\\\\\  /\\\\\\\\\\\     /\\\\\\\\\          /\\\\\              
    \///////\\\/////  \/////\\\///    /\\\\\\\\\\\\\      /\\\///\\\           
           \/\\\           \/\\\      /\\\/////////\\\   /\\\/  \///\\\        
            \/\\\           \/\\\     \/\\\       \/\\\  /\\\      \//\\\      
             \/\\\           \/\\\     \/\\\\\\\\\\\\\\\ \/\\\       \/\\\     
              \/\\\           \/\\\     \/\\\/////////\\\ \//\\\      /\\\     
               \/\\\           \/\\\     \/\\\       \/\\\  \///\\\  /\\\      
                \/\\\        /\\\\\\\\\\\ \/\\\       \/\\\    \///\\\\\/      
                 \///        \///////////  \///        \///       \/////       

--><meta name="author" content="Louis Tiao">
<meta name="robots" content="noindex">
<meta property="og:site_name" content="Louis Tiao">
<meta property="og:title" content="Creating a Nikola theme with Sass-compiled Bootstrap">
<meta property="og:url" content="http://ltiao.github.io/posts/creating-a-nikola-theme-with-sass-compiled-bootstrap.html">
<meta property="og:description" content="First, create a new Nikola theme. The way I like to do this is by creating a
new repository on Github so that it can be initialized with a README,
LICENSE, .gitignore, etc. Next, clone the newly creat">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-09-28T22:59:54+10:00">
<meta property="article:tag" content="bootstrap">
<meta property="article:tag" content="nikola">
<meta property="article:tag" content="sass">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<div class="container">
    <div class="page-header">
        
<form class="navbar-form navbar-right" role="search">
  <div class="form-group">
    <input type="text" class="form-control" placeholder="Search">
</div>
</form>

        <ul class="nav nav-pills pull-right">
<li>
    <a href="creating-a-nikola-theme-with-sass-compiled-bootstrap.rst" id="sourcelink">Source</a>
    </li>
            
        </ul>
<a href="http://ltiao.github.io/">
    
            <h2 class="text-muted">
                <span id="blog-title"><strong>Louis Tiao</strong></span>
            </h2>
        </a>
    </div> <!-- ./page-header -->
</div> <!-- ./container -->

<!-- End of Menubar -->

<div class="container" id="content" role="main">
    <div class="row">
        <div class="col-sm-3 col-md-2">
            <ul class="nav nav-pills nav-stacked">
<li>
<a href="../pages/about.html">About</a>
                </li>
<li>
<a href="../pages/projects.html">Projects</a>
                </li>
<li>
<a href="../pages/curriculum-vitae.html">Curriculum Vitae</a>
                </li>
<li>
<a href="../pages/contact.html">Contact</a>
                </li>
<li>
<a href="../categories/compsci.html">CompSci</a>
                </li>
<li>
<a href="../categories/coding.html">Coding</a>
                </li>
<li>
<a href="../categories/misc.html">Misc</a>
                </li>
<li>
<a href="../tags/python.html">Python</a>
                </li>
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
</div> <!-- ./col -->
        <div class="col-sm-9 col-md-10">
            <div class="body-content">
                <!--Body content-->
                <div class="row">
                    
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Creating a Nikola theme with Sass-compiled Bootstrap</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Louis Tiao
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2015-09-28T22:59:54+10:00" itemprop="datePublished" title="2015-09-28 22:59">2015-09-28 22:59</time></a></p>
                <p class="commentline">            <a href="creating-a-nikola-theme-with-sass-compiled-bootstrap.html#disqus_thread" data-disqus-identifier="cache/posts/creating-a-nikola-theme-with-sass-compiled-bootstrap.html">Comments</a>


                    </p>
<p class="sourceline"><a href="creating-a-nikola-theme-with-sass-compiled-bootstrap.rst" id="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>First, create a new Nikola theme. The way I like to do this is by creating a
<a class="reference external" href="https://github.com/new">new repository on Github</a> so that it can be initialized with a README,
LICENSE, <tt class="docutils literal">.gitignore</tt>, etc. Next, clone the newly created repo into
<tt class="docutils literal"><span class="pre">&lt;site-root&gt;/themes</span></tt>.</p>
<p>The bare minimum requirement for a Nikola theme is that it include a
<tt class="docutils literal">parent</tt> file. Since our theme just uses our own extended and customized
Bootstrap, it makes sense to inherit from <tt class="docutils literal">bootstrap3</tt> or its <a class="reference external" href="http://jinja.pocoo.org/">Jinja2</a>
port, <tt class="docutils literal"><span class="pre">bootstrap3-jinja</span></tt>. I much prefer Jinja2 over <a class="reference external" href="http://www.makotemplates.org/">Mako</a>, so we shall opt
for the latter. It goes without saying that everything outlined below can
trivially be made to work for Mako.</p>
<pre class="code console"><a name="rest_code_ca7b958686f446d0b6b8c78491343de8-1"></a><span class="gp">$</span> <span class="nb">cd</span> &lt;site-root&gt;/themes/&lt;rep-root&gt;
<a name="rest_code_ca7b958686f446d0b6b8c78491343de8-2"></a><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">"bootstrap3-jinja"</span> &gt; parent
</pre>
<p>The following is not strictly required, but is good practice (explicit is
better than implicit). We specify Jinja2 as the template engine.</p>
<pre class="code console"><a name="rest_code_2fe83c05ac7044c98938927be90b23fb-1"></a><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">"jinja"</span> &gt; engine
</pre>
<p>Note that our theme is going to be very similar to
<a class="reference external" href="https://themes.getnikola.com/#bootstrap3-gradients-jinja">bootstrap3-gradients-jinja</a>, which is a theme that uses
<tt class="docutils literal"><span class="pre">bootstrap-theme.css</span></tt>, an optional Bootstrap stylesheet that includes
gradients and is touted by the Bootstrap developers as "providing a visually
enhanced experience".</p>
<p>Not surprisingly, it is almost identical to the <tt class="docutils literal"><span class="pre">bootstrap3-jinja</span></tt> theme.
The key difference is that is requires an additional stylesheet, so the
webassets bundle and <tt class="docutils literal">html_stylesheets()</tt> macro in <tt class="docutils literal">base_helper.tmpl</tt> must
be updated to reflect that. Our theme is going to be similar in that we use
our own customized Boostrap stylesheet, compiled from Sass.</p>
<p>We will take care of this later. For now, let us get our Sass workflow up and
running.</p>
<p>Create the <tt class="docutils literal">sass</tt> directory inside the root of the repo</p>
<pre class="code console"><a name="rest_code_0edd1ea25ffd4d99a9619195a84cd454-1"></a><span class="gp">$</span> <span class="nb">cd</span> &lt;site-root&gt;/themes/&lt;repo-root&gt;
<a name="rest_code_0edd1ea25ffd4d99a9619195a84cd454-2"></a><span class="gp">$</span> mkdir sass
</pre>
<p>Next, we must obtain the Sass sources for Bootstrap. There are many ways to do
this, either through Compass, Bower, directly from source, etc. I prefer to do
this through Bower.</p>
<ul>
<li>
<p class="first">Install <a class="reference external" href="http://blog.npmjs.org/post/85484771375/how-to-install-npm">npm</a>, which is most easily done by installing <a class="reference external" href="https://nodejs.org/">Node.js</a>.</p>
</li>
<li>
<p class="first">Install <a class="reference external" href="http://bower.io/#install-bower">Bower</a></p>
<pre class="code console"><a name="rest_code_7058c6ae8e2540309653037ac83c5cf0-1"></a><span class="gp">$</span> npm install -g bower
</pre>
</li>
</ul>
<p>Install <tt class="docutils literal"><span class="pre">boostrap-sass</span></tt> inside the <tt class="docutils literal">sass</tt> directory.</p>
<pre class="code console"><a name="rest_code_516304b5daf94ab2ab4bd0a3e2e63024-1"></a><span class="gp">$</span> <span class="nb">cd</span> &lt;site-root&gt;/themes/&lt;repo-root&gt;/sass
<a name="rest_code_516304b5daf94ab2ab4bd0a3e2e63024-2"></a><span class="gp">$</span> bower install bootstrap-sass
</pre>
<p>You should now see all components installed in the <tt class="docutils literal">bower_components</tt>
directory.</p>
<p>Now we create a SCSS file, call it say, <tt class="docutils literal"><span class="pre">bootstrap-custom.scss</span></tt>, which is the
primary file that we will be compiling to CSS. It will be the main entrypoint
that imports the Bootstrap sources, as well as any other customizations we
make. We create a file <tt class="docutils literal"><span class="pre">_variables-custom.scss</span></tt> to isolate all the
modifications we make to Bootstrap variables.</p>
<pre class="code console"><a name="rest_code_a17cbb3aeb0049e3afee6c333950dfcc-1"></a><span class="gp">$</span> touch bootstrap-custom.scss
<a name="rest_code_a17cbb3aeb0049e3afee6c333950dfcc-2"></a><span class="gp">$</span> touch _variables-custom.scss
</pre>
<p>Note that Sass/SCSS files with leading underscores are <cite>partials</cite>, which lets
Sass know that it is only a partial file and should not be compiled
(see <a class="reference external" href="http://sass-lang.com/guide">http://sass-lang.com/guide</a>). This doesn't really matter with Nikola since
we have to explicitly tell Nikola which files to pass on to the Sass compiler
anyways.</p>
<p>Now we modify <tt class="docutils literal"><span class="pre">bootstrap-custom.scss</span></tt> to import our custom variables and the
Bootstrap sources</p>
<pre class="code scss"><a name="rest_code_6d3da4c50e2b4caa89d47b6724a43df9-1"></a><span class="k">@import</span> <span class="s2">"variables-custom"</span><span class="p">;</span>
<a name="rest_code_6d3da4c50e2b4caa89d47b6724a43df9-2"></a><span class="k">@import</span> <span class="s2">"bower_components/bootstrap-sass/assets/stylesheets/bootstrap"</span><span class="p">;</span>
</pre>
<p>and create the <tt class="docutils literal">targets</tt> file, which lets Nikola know which files to pass on
to the Sass compiler (see <a class="reference external" href="https://getnikola.com/theming.html#less-and-sass">https://getnikola.com/theming.html#less-and-sass</a>).</p>
<pre class="code console"><a name="rest_code_25d1176c809940618d3143bf5853fe96-1"></a><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">"bootstrap-custom.scss"</span> &gt; sass/targets
</pre>
<p>Now, install the Nikola plugin for Sass.</p>
<pre class="code console"><a name="rest_code_68f1197d4b0e4592bac8bb94424d8558-1"></a><span class="gp">$</span> nikola plugin --install<span class="o">=</span>sass
</pre>
<p>If this plugin is not installed, Nikola will just silently ignore anything
in the <tt class="docutils literal">sass</tt> directory of your theme.</p>
<p>Once the plugin has been installed successfully, you will be reminded to
<a class="reference external" href="http://sass-lang.com/install">install Sass</a>. If you haven't already done so, you can do so easily with
<tt class="docutils literal">gem</tt>:</p>
<pre class="code console"><a name="rest_code_e2fb08ff1b284aa9ba6b29d175b30a28-1"></a><span class="gp">$</span> gem install sass
</pre>
<p>At this point, when you execute <tt class="docutils literal">nikola build</tt>, you will see the Bootstrap
Sass source files being processed by the <tt class="docutils literal">prepare_sass_sources</tt> task and the
final <tt class="docutils literal"><span class="pre">output/assets/css/bootstrap-custom.css</span></tt> built by the <tt class="docutils literal">build_sass</tt>
task:</p>
<pre class="code console"><a name="rest_code_540781dc95eb4efdbc413ee7cf499926-1"></a><span class="gp">$</span> nikola build
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-2"></a><span class="go">.  prepare_sass_sources:cache/sass/_variables-custom.scss</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-3"></a><span class="go">.  prepare_sass_sources:cache/sass/bootstrap-custom.scss</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-4"></a><span class="go">.  prepare_sass_sources:cache/sass/targets</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-5"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/.bower.json</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-6"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/bower.json</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-7"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/CHANGELOG.md</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-8"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/composer.json</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-9"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/CONTRIBUTING.md</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-10"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/LICENSE</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-11"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/package.json</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-12"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/README.md</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-13"></a><span class="go">.  prepare_sass_sources:cache/sass/bower_components/bootstrap-sass/sache.json</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-14"></a><span class="go">    ...</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-15"></a><span class="go">.  build_sass:output/assets/css/bootstrap-custom.css</span>
<a name="rest_code_540781dc95eb4efdbc413ee7cf499926-16"></a><span class="go">    ...</span>
</pre>
<p>A quick sanity check to confirm
<tt class="docutils literal"><span class="pre">&lt;site-root&gt;/themes/&lt;repo-root&gt;/sass/bootstrap-custom.scss</span></tt> was compiled to
<tt class="docutils literal"><span class="pre">&lt;site-root&gt;/output/assets/css/bootstrap-custom.css</span></tt> as expected.</p>
<pre class="code console"><a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-1"></a><span class="gp">$</span> head -15 output/assets/css/bootstrap-custom.css
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-2"></a><span class="go">@charset "UTF-8";</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-3"></a><span class="go">/*!</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-4"></a><span class="go"> * Bootstrap v3.3.5 (http://getbootstrap.com)</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-5"></a><span class="go"> * Copyright 2011-2015 Twitter, Inc.</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-6"></a><span class="go"> * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-7"></a><span class="go"> */</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-8"></a><span class="go">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-9"></a><span class="go">html {</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-10"></a><span class="go">  font-family: sans-serif;</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-11"></a><span class="go">  -ms-text-size-adjust: 100%;</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-12"></a><span class="go">  -webkit-text-size-adjust: 100%; }</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-13"></a>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-14"></a><span class="go">body {</span>
<a name="rest_code_4b269f8f204e451a9f4a7291b46d2fee-15"></a><span class="go">  margin: 0; }</span>
</pre>
<p>Now we just need to override the <tt class="docutils literal">base_helper.tmpl</tt> template and the
webassets bundle to use our customized Bootstrap stylesheet.</p>
<dl class="docutils">
<dt>bundle</dt>
<dd>
<p class="first">Copy the contents of <tt class="docutils literal">bundle</tt></p>
<pre class="code text"><a name="rest_code_c458429989f3451ea0f715d7977cd01b-1"></a>assets/css/all-nocdn.css=bootstrap.css,bootstrap-theme.css,rst.css,code.css,colorbox.css,theme.css,custom.css
<a name="rest_code_c458429989f3451ea0f715d7977cd01b-2"></a>assets/css/all.css=rst.css,code.css,colorbox.css,theme.css,custom.css
<a name="rest_code_c458429989f3451ea0f715d7977cd01b-3"></a>assets/js/all-nocdn.js=jquery.min.js,bootstrap.min.js,jquery.colorbox-min.js,moment-with-locales.min.js,fancydates.js
<a name="rest_code_c458429989f3451ea0f715d7977cd01b-4"></a>assets/js/all.js=jquery.colorbox-min.js,moment-with-locales.min.js,fancydates.js
</pre>
<div class="last"><pre class="code text"><a name="rest_code_05931ddbe89f4f6fb59e21ad5cb05360-1"></a>assets/css/all.css=bootstrap-custom.css,rst.css,code.css,colorbox.css,theme.css,custom.css
<a name="rest_code_05931ddbe89f4f6fb59e21ad5cb05360-2"></a>assets/js/all-nocdn.js=jquery.min.js,bootstrap.min.js,jquery.colorbox-min.js,moment-with-locales.min.js,fancydates.js
<a name="rest_code_05931ddbe89f4f6fb59e21ad5cb05360-3"></a>assets/js/all.js=jquery.colorbox-min.js,moment-with-locales.min.js,fancydates.js
</pre></div>
</dd>
</dl>
<p>Bootswatch (Optional)</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../tags/bootstrap.html" rel="tag">bootstrap</a></li>
            <li><a class="tag p-category" href="../tags/nikola.html" rel="tag">nikola</a></li>
            <li><a class="tag p-category" href="../tags/sass.html" rel="tag">sass</a></li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="ltiao",
            disqus_url="http://ltiao.github.io/posts/creating-a-nikola-theme-with-sass-compiled-bootstrap.html",
        disqus_title="Creating a Nikola theme with Sass-compiled Bootstrap",
        disqus_identifier="cache/posts/creating-a-nikola-theme-with-sass-compiled-bootstrap.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="ltiao";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
                <!--End of body content-->
            </div>
        </div> <!-- ./col -->
    </div> <!-- ./row -->  
</div> <!-- ./container -->

<footer class="footer"><div class="container">
        <p class="text-muted">
            Contents Â© 2015         <a href="mailto:louistiao@me.com">Louis Tiao</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </p>
    </div>
</footer><script src="../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink)').colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43722566-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
